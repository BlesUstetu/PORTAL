<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BlesProduction â€” Web Developer Portfolio</title>
  <meta name="description" content="BlesProduction â€” Web Developer. Web apps, dashboards, and automation tools." />
  <style>
    :root{
      --bg:#070A12;
      --muted:#9AA4B2;
      --text:#E8EEF6;
      --line:rgba(255,255,255,.08);
      --accent2:#5CF0B7;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --radius:18px;
      --w: 1080px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background:
        radial-gradient(900px 500px at 15% 10%, rgba(138,162,255,.12), transparent 60%),
        radial-gradient(800px 520px at 85% 20%, rgba(92,240,183,.10), transparent 55%),
        radial-gradient(700px 520px at 50% 110%, rgba(255,255,255,.06), transparent 55%),
        var(--bg);
      color:var(--text);
      line-height:1.5;
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    .container{max-width:var(--w); margin:0 auto; padding:24px}
    .topbar{
      position:sticky; top:0; z-index:20;
      backdrop-filter: blur(10px);
      background: rgba(7,10,18,.72);
      border-bottom:1px solid var(--line);
    }
    .topbar .inner{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 24px}
    .brand{
      display:flex; align-items:center; gap:12px; min-width:220px;
      font-weight:700; letter-spacing:.2px;
    }
    .logo{
      width:38px; height:38px; border-radius:12px;
      background:
        radial-gradient(16px 16px at 30% 35%, rgba(255,255,255,.35), transparent 60%),
        linear-gradient(135deg, rgba(138,162,255,.95), rgba(92,240,183,.85));
      box-shadow: 0 10px 30px rgba(138,162,255,.18);
      border:1px solid rgba(255,255,255,.12);
    }

    /* brandmark image (optional) */
    .brandmark{ width:20px; height:20px; border-radius:6px; border:1px solid rgba(255,255,255,.10); }

    nav{display:flex; gap:16px; align-items:center; flex-wrap:wrap; justify-content:flex-end}
    nav a{
      color: rgba(232,238,246,.82);
      font-size:14px;
      padding:8px 10px;
      border-radius:10px;
      transition: .2s ease;
    }
    nav a:hover{background: rgba(255,255,255,.06); color: var(--text)}

    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: var(--text);
      font-weight:600;
      font-size:14px;
      cursor:pointer;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.16)}
    .btn.primary{
      background: linear-gradient(135deg, rgba(138,162,255,.95), rgba(92,240,183,.70));
      border-color: rgba(255,255,255,.22);
      color: #061016;
    }
    .btn.primary:hover{transform: translateY(-2px)}
    .btn.small{padding:10px 12px; border-radius:12px}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: rgba(232,238,246,.86);
      font-size:13px;
    }
    .dot{width:8px; height:8px; border-radius:999px; background: var(--accent2); box-shadow:0 0 0 4px rgba(92,240,183,.10)}

    .hero{padding:48px 0 10px}
    .hero-grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:22px;
      align-items:stretch;
    }
    .card{
      background:
        radial-gradient(280px 160px at 20% 10%, rgba(138,162,255,.12), transparent 60%),
        radial-gradient(240px 160px at 80% 0%, rgba(92,240,183,.10), transparent 60%),
        rgba(12,17,32,.80);
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .card::after{
      content:"";
      position:absolute; inset:-120px;
      background: radial-gradient(circle at var(--mx,50%) var(--my,50%), rgba(255,255,255,.10), transparent 40%);
      opacity: 0;
      transition: opacity .2s ease;
      pointer-events:none;
    }
    .card:hover::after{opacity:1}
    .card-pad{padding:26px}

    .kicker{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      margin-bottom:14px;
    }
    h1{
      font-size: 46px;
      line-height:1.05;
      margin:0 0 14px;
      letter-spacing: -0.6px;
    }
    .subhead{
      margin:0 0 18px;
      color: rgba(232,238,246,.82);
      font-size:16px;
      max-width: 62ch;
    }
    .cta-row{display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin-top:16px}
    .mini{color:var(--muted); font-size:13px; margin-top:14px}

    .side{
      display:flex; flex-direction:column; gap:14px;
    }
    .stat{
      display:flex; justify-content:space-between; gap:12px; align-items:flex-end;
      padding:16px 18px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .stat .label{font-size:13px; color: rgba(232,238,246,.70)}
    .stat .value{
      font-family: var(--mono);
      font-size: 14px;
      color: rgba(232,238,246,.92);
    }
    .side .box{
      padding:18px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .side h3{margin:0 0 10px; font-size:14px; color: rgba(232,238,246,.90)}
    .tags{display:flex; flex-wrap:wrap; gap:8px}
    .tag{
      padding:8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      font-size: 12px;
      color: rgba(232,238,246,.78);
    }

    section{padding:26px 0}
    .section-title{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin:0 0 12px;
    }
    .section-title h2{margin:0; font-size:18px}

    .grid-3{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
    }
    .grid-2{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:14px;
    }
    .tile{
      padding:18px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      min-height: 98px;
    }
    .tile h3{margin:0 0 8px; font-size:14px}
    .tile p{margin:0; color: rgba(232,238,246,.74); font-size:13px}

    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      padding: 12px 14px;
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.02);
      margin: 10px 0 12px;
    }
    .search{
      display:flex; align-items:center; gap:10px;
      flex:1;
      min-width: 220px;
    }
    .search input{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: var(--text);
      outline:none;
    }
    .select{
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: var(--text);
      outline:none;
      min-width: 160px;
    }
    .project{
      padding:18px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(220px 120px at 10% 0%, rgba(138,162,255,.10), transparent 60%),
        rgba(255,255,255,.03);
      display:flex;
      flex-direction:column;
      gap:10px;
      position:relative;
      overflow:hidden;
    }
    .project h3{margin:0; font-size:15px}
    .project p{margin:0; color: rgba(232,238,246,.74); font-size:13px}
    .project .meta{
      display:flex; flex-wrap:wrap; gap:8px;
      margin-top:4px;
    }
    .chip{
      font-family: var(--mono);
      font-size: 12px;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: rgba(232,238,246,.80);
    }
    .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:6px}

    .contact-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    .field label{display:block; font-size:12px; color: rgba(232,238,246,.70); margin:0 0 6px}
    .field input, .field textarea{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: var(--text);
      outline:none;
      font-family: var(--sans);
      resize: vertical;
    }
    .field textarea{min-height:110px}
    footer{
      padding:22px 0 36px;
      color: rgba(232,238,246,.55);
      font-size: 13px;
    }
    .footer-row{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:space-between; align-items:center;
      border-top: 1px solid var(--line);
      padding-top: 16px;
    }

    @media (max-width: 920px){
      .hero-grid{grid-template-columns: 1fr; }
      h1{font-size: 40px}
      nav{justify-content:flex-start}
      .brand{min-width:auto}
    }
    @media (max-width: 760px){
      .grid-3{grid-template-columns: 1fr}
      .grid-2{grid-template-columns: 1fr}
      .contact-grid{grid-template-columns: 1fr}
      h1{font-size: 34px}

      .cta-row{flex-direction: column; align-items: stretch}
      .cta-row .btn{width: 100%; justify-content: center}
    }

    .badge-featured{
      position:absolute;
      top:14px;
      right:14px;
      padding:6px 10px;
      font-size:11px;
      font-weight:700;
      letter-spacing:.4px;
      border-radius:999px;
      background: linear-gradient(135deg, #FFD36A, #FF9F1C);
      color:#1a1200;
      box-shadow: 0 8px 22px rgba(255,159,28,.35);
      border: 1px solid rgba(255,255,255,.18);
    }

    /* --- Chat Bubble + Live Panel (iframe) --- */
    .chatbot-fab{
      position:fixed; right:18px; bottom:18px; z-index:9999;
      width:56px; height:56px; border-radius:999px;
      display:grid; place-items:center;
      border:1px solid var(--line);
      background: radial-gradient(120% 120% at 30% 20%, rgba(92,240,183,.35), rgba(255,255,255,.06));
      box-shadow: var(--shadow);
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, filter .15s ease;
    }
    .chatbot-fab:hover{ transform: translateY(-2px); filter: brightness(1.05); }
    .chatbot-fab:active{ transform: translateY(0); }
    .chatbot-fab svg{ opacity:.95 }

    .chatbot-panel{
      position:fixed; right:18px; bottom:86px; z-index:9999;
      width:min(420px, calc(100vw - 36px));
      height: min(620px, calc(100vh - 140px));
      border-radius: 18px;
      border:1px solid var(--line);
      background: rgba(7,10,18,.92);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      display:none; /* hidden by default */
      overflow:hidden;
    }
    .chatbot-panel[aria-hidden="false"]{ display:flex; flex-direction:column; }

    .chatbot-header{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 12px 10px 14px;
      border-bottom:1px solid var(--line);
    }
    .chatbot-title{
      display:flex; gap:10px; align-items:center;
      font-weight:700; letter-spacing:.2px;
    }
    .chatbot-badge{
      font-size:12px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--line);
      color: var(--muted);
      background: rgba(255,255,255,.04);
    }
    .chatbot-actions{ display:flex; gap:8px; align-items:center; }
    .chatbot-iconbtn{
      width:34px; height:34px; border-radius:10px;
      display:grid; place-items:center;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--text);
      cursor:pointer;
      text-decoration:none;
      line-height:1;
    }
    .chatbot-iconbtn:hover{ filter: brightness(1.06); }

    .chatbot-loading{
      font-size:12px;
      color: var(--muted);
      padding:10px 12px;
      border-bottom:1px solid var(--line);
      display:none;
    }
    .chatbot-panel[data-loading="true"] .chatbot-loading{ display:block; }

    .chatbot-iframe{
      width:100%;
      height:100%;
      border:0;
      background: transparent;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="inner container" style="padding:0 24px">
      <div class="brand">
        <img class="brandmark" src="bles_20x20.png" alt="BlesProduction" />
        <div>
          <div style="font-size:14px; opacity:.95;">Blasius Ustetu</div>
          <div style="font-size:12px; color:rgba(232,238,246,.62); font-family:var(--mono);">Web Developer â€¢ Dashboards â€¢ Automation</div>
        </div>
      </div>

      <nav>
        <a href="#proof">Proof</a>
        <a href="#about">About</a>
        <a href="#skills">Skills</a>
        <a href="#projects">Projects</a>
        <a href="#contact">Contact</a>
        <a class="btn small" style="border:1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.03);" href="#projects">View Projects</a>

        <!-- optional: keep top link too -->
        <a href="https://bles-k9q0mqpju-blesustetus-projects.vercel.app"
           target="_blank"
           rel="noopener"
           style="
             display:inline-flex;align-items:center;gap:8px;
             padding:10px 14px;border-radius:12px;
             background:#111827;color:#fff;text-decoration:none;
             font-weight:600;">
          ðŸ’¬ Chat AI (Live)
        </a>
      </nav>
    </div>
  </div>

  <main class="container">
    <div class="hero" id="home">
      <div class="hero-grid">
        <div class="card hover-tilt">
          <div class="card-pad">
            <div class="kicker">
              <span class="pill"><span class="dot"></span> Available for: Freelance â€¢ Contract â€¢ Remote</span>
            </div>

            <h1>Web Developer â€” Web Apps, Dashboards & Automation</h1>

            <p class="subhead">
              I build clean, fast, and production-ready web applications â€” from internal dashboards and inventory systems
              to client-facing landing pages. Focused on reliable logic, clear UX, and real-world usability.
            </p>

            <div class="cta-row">
              <a class="btn primary" href="#projects">View Projects</a>
              <a class="btn" href="#contact">Contact</a>
            </div>

            <div class="mini">Tech focus: HTML â€¢ CSS â€¢ JavaScript â€¢ Google Apps Script â€¢ React (optional)</div>
          </div>
        </div>

        <div class="card hover-tilt">
          <div class="card-pad side">
            <div class="stat">
              <div>
                <div class="label">Primary Stack</div>
                <div class="value">HTML / JS / Apps Script</div>
              </div>
              <div class="value">v1.0</div>
            </div>

            <div class="box">
              <h3>Highlights</h3>
              <div class="tags">
                <span class="tag">Internal Tools</span>
                <span class="tag">Dashboards</span>
                <span class="tag">Automation</span>
                <span class="tag">Google Sheets DB</span>
                <span class="tag">Forms & Validation</span>
                <span class="tag">Role-based UI</span>
              </div>
            </div>

            <div class="box">
              <h3>Links</h3>
              <div style="display:flex; flex-direction:column; gap:10px; font-size:13px; color:rgba(232,238,246,.78)">
                <a href="https://wa.me/6285239993851" id="waLink" target="_blank" rel="noreferrer">
                  No WhatsApp: <span style="color:rgba(232,238,246,.95)">+6285239993851</span>
                </a>
                <a href="mailto:lionustetu@gmail.com" id="emailLink">
                  Email: <span style="color:rgba(232,238,246,.95)">lionustetu@gmail.com</span>
                </a>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <section id="proof">
      <div class="section-title">
        <h2>Proof / Metrics</h2>
      </div>

      <div class="grid-3">
        <div class="tile">
          <h3>Projects</h3>
          <p>Web Apps â€¢ Dashboards â€¢ Internal Tools</p>
        </div>
        <div class="tile">
          <h3>Focus</h3>
          <p>Clean UI â€¢ Reliable Logic â€¢ Real-World Use</p>
        </div>
        <div class="tile">
          <h3>Stack</h3>
          <p>HTML â€¢ CSS â€¢ JavaScript â€¢ Google Apps Script</p>
        </div>
      </div>
    </section>

    <section id="about">
      <div class="section-title">
        <h2>About</h2>
      </div>

      <div class="card">
        <div class="card-pad">
          <p style="margin:0; color:rgba(232,238,246,.82); max-width:90ch;">
            <b>BlesProduction</b> is a developer brand focused on building clean, modern, and scalable web applications.
            I deliver practical solutions for internal tools (inventory, logs, dashboards) and client-facing web pages,
            with strong attention to usability, consistency, and reliability.
          </p>

          <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
            <span class="chip">UI Engineering</span>
            <span class="chip">Component Systems</span>
            <span class="chip">Web3 Frontend</span>
            <span class="chip">Data UX</span>
            <span class="chip">Performance</span>
          </div>
        </div>
      </div>
    </section>

    <section id="skills">
      <div class="section-title">
        <h2>Skills</h2>
      </div>

      <div class="grid-3">
        <div class="tile">
          <h3>Frontend</h3>
          <p>HTML, CSS, JavaScript</p>
        </div>
        <div class="tile">
          <h3>Web Applications</h3>
          <p>Dashboards, Forms, Tables, Automation</p>
        </div>
        <div class="tile">
          <h3>Integrations</h3>
          <p>Google Sheets as DB, Google Apps Script, REST API (optional)</p>
        </div>
      </div>
    </section>

    <section id="projects">
      <div class="section-title">
        <h2>Projects</h2>
      </div>

      <div class="toolbar">
        <div class="search">
          <span style="font-family:var(--mono); font-size:12px; color:rgba(232,238,246,.70)">SEARCH</span>
          <input id="searchInput" placeholder="Cari projectâ€¦" />
        </div>

        <select id="filterSelect" class="select">
          <option value="all">All</option>
          <option value="dapp">DApp</option>
          <option value="dashboard">Dashboard</option>
          <option value="landing">Landing</option>
          <option value="ticket">Ticketing</option>
        </select>
      </div>

      <div class="grid-2" id="projectGrid"></div>
    </section>

    <section id="contact">
      <div class="section-title">
        <h2>Contact</h2>
      </div>

      <div class="card">
        <div class="card-pad">
          <div class="contact-grid">
            <div>
              <div style="margin-bottom:12px; color:rgba(232,238,246,.82)">
                For kolaborasi, web app/dashboard needs, or project freelance/contract. Available for full-time, contract, and freelance.
              </div>

              <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px">
                <a class="btn primary" href="mailto:lionustetu@gmail.com" id="emailCta">Email Me</a>
                <a class="btn" href="./cv.pdf" id="cvCta" target="_blank" rel="noreferrer">Open CV</a>
              </div>

              <div style="margin-top:16px; color:rgba(232,238,246,.70); font-size:13px">
                <div><span style="color:rgba(232,238,246,.92)">Email:</span> lionustetu@gmail.com</div>
                <div><span style="color:rgba(232,238,246,.92)">Location:</span> Indonesia</div>
                <div><span style="color:rgba(232,238,246,.92)">Timezone:</span> GMT+7</div>
              </div>
            </div>

            <form id="contactForm">
              <div class="field">
                <label>Nama</label>
                <input name="name" placeholder="Nama Anda" required />
              </div>
              <div class="field" style="margin-top:10px">
                <label>Email</label>
                <input name="email" type="email" placeholder="email@domain.com" required />
              </div>
              <div class="field" style="margin-top:10px">
                <label>Pesan</label>
                <textarea name="message" placeholder="Tulis kebutuhan Andaâ€¦" required></textarea>
              </div>
              <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end">
                <button class="btn" type="reset">Reset</button>
                <button class="btn primary" type="submit">Send</button>
              </div>
              <div id="formHint" style="margin-top:10px; font-size:12px; color:rgba(232,238,246,.60)"></div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="footer-row">
        <div>Â© <span id="year"></span> BlesProduction. All rights reserved.</div>
        <div style="font-family:var(--mono); opacity:.8"></div>
      </div>
    </footer>
  </main>

  <script>
    const PROFILE = {
      email: "lionustetu@gmail.com",
      cvUrl: "./cv.pdf",
    };

    const PROJECTS = [
      {
        title: "E-Ticket System â€” Public Web Ticketing Platform",
        type: "ticket",
        desc: "Production-ready web ticketing system for public access. Designed for fast ticket ordering, clean UI flow, and reliable data validation. Suitable for events, internal distribution, and small-scale ticket sales.",
        stack: ["HTML", "CSS", "JavaScript"],
        live: "https://blesustetu.github.io/tiket/",
        repo: ""
      },
      {
        title: "Inventory Management â€” Internal Web Application",
        type: "dashboard",
        desc: "Web-based inventory system for recording, updating, and searching asset data, built to replace manual processes and improve operational efficiency.",
        stack: ["HTML", "CSS", "JavaScript", "Forms"],
        live: "https://blesustetu.github.io/INVENTARIS/",
        repo: ""
      },
      {
        title: "Dashboard KPI â€” Performance Monitoring Web App",
        type: "dashboard",
        desc: "Internal dashboard for monitoring KPIs and performance metrics, designed to help teams track data efficiently and support faster decision-making.",
        stack: ["HTML", "CSS", "JavaScript", "Charts"],
        live: "https://blesustetu.github.io/Dasboard-KPI/",
        repo: ""
      },
      {
        title: "Neon Dodge â€” Browser Game Prototype",
        type: "landing",
        desc: "Lightweight browser-based game showcasing interactive UI, animation handling, and responsive gameplay logic.",
        stack: ["JavaScript", "Canvas", "UI"],
        live: "https://blesustetu.github.io/Game-Neon-dodge/",
        repo: ""
      }
    ];

    const $ = (q) => document.querySelector(q);
    const $$ = (q) => document.querySelectorAll(q);

    function isValidLink(url){
      return typeof url === "string" && url.trim() && url.trim() !== "#";
    }

    function bindLinks(){
      const wa = document.querySelector("#waLink");
      if (wa) wa.href = "https://wa.me/6285239993851";

      const emailLink = document.querySelector("#emailLink");
      if (emailLink) emailLink.href = "mailto:" + PROFILE.email;

      const emailCta = document.querySelector("#emailCta");
      if (emailCta) emailCta.href = "mailto:" + PROFILE.email;

      const cvCta = document.querySelector("#cvCta");
      if (cvCta) cvCta.href = PROFILE.cvUrl;
    }

    function renderProjects(list){
      const grid = $("#projectGrid");
      grid.innerHTML = "";
      list.forEach(p => {
        const el = document.createElement("div");
        el.className = "project hover-tilt";
        el.dataset.type = p.type;

        const liveBtn = isValidLink(p.live)
          ? `<a class="btn small primary" href="${p.live}" target="_blank" rel="noreferrer">Live</a>`
          : "";

        const repoBtn = isValidLink(p.repo)
          ? `<a class="btn small" style="background: rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.10);" href="${p.repo}" target="_blank" rel="noreferrer">Repo</a>`
          : "";

        const badge = p.highlight
          ? `<div class="badge-featured">${p.highlight}</div>`
          : "";

        const actions = (liveBtn || repoBtn) ? `<div class="actions">${liveBtn}${repoBtn}</div>` : ``;

        el.innerHTML = `
          ${badge}
          <div class="top">
            <div>
              <h3>${p.title}</h3>
              <p>${p.desc}</p>
              <div class="meta">
                <span class="chip">${p.type.toUpperCase()}</span>
                ${p.stack.map(s => `<span class="chip">${s}</span>`).join("")}
              </div>
            </div>
          </div>
          ${actions}
        `;
        grid.appendChild(el);
      });
      bindHoverTilt();
    }

    function applyFilters(){
      const q = $("#searchInput").value.trim().toLowerCase();
      const t = $("#filterSelect").value;

      const filtered = PROJECTS.filter(p => {
        const text = (p.title + " " + p.desc + " " + p.stack.join(" ")).toLowerCase();
        const matchQ = !q || text.includes(q);
        const matchT = (t === "all") || (p.type === t);
        return matchQ && matchT;
      });

      renderProjects(filtered);
    }

    function initContact(){
      $("#contactForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const data = new FormData(e.target);
        const name = data.get("name");
        const email = data.get("email");
        const message = data.get("message");

        const subject = encodeURIComponent(`[Portfolio] Message from ${name}`);
        const body = encodeURIComponent(`Name: ${name}
Email: ${email}

Message:
${message}`);

        const mailto = `mailto:${PROFILE.email}?subject=${subject}&body=${body}`;
        window.location.href = mailto;

        $("#formHint").textContent = "Jika email client tidak terbuka otomatis, pastikan default mail app sudah diatur di perangkat Anda.";
      });
    }

    function bindHoverTilt(){
      $$(".hover-tilt").forEach(card => {
        card.addEventListener("mousemove", (e) => {
          const r = card.getBoundingClientRect();
          const x = e.clientX - r.left;
          const y = e.clientY - r.top;

          const mx = (x / r.width) * 100;
          const my = (y / r.height) * 100;

          card.style.setProperty("--mx", mx + "%");
          card.style.setProperty("--my", my + "%");

          const rotateY = ((x - r.width/2) / r.width) * 6;
          const rotateX = -((y - r.height/2) / r.height) * 6;
          card.style.transform = `perspective(900px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-1px)`;
        });

        card.addEventListener("mouseleave", () => {
          card.style.transform = "none";
          card.style.setProperty("--mx", "50%");
          card.style.setProperty("--my", "50%");
        });
      });
    }

    $("#year").textContent = new Date().getFullYear();
    bindLinks();
    renderProjects(PROJECTS);
    initContact();

    $("#searchInput").addEventListener("input", applyFilters);
    $("#filterSelect").addEventListener("change", applyFilters);
  </script>

  <!-- Floating Chat Bubble -->
  <button class="chatbot-fab" id="chatbotFab" aria-label="Open Chat AI (Live)" title="Chat AI (Live)">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M7.5 18.5 4 20V6.5C4 5.12 5.12 4 6.5 4H17.5C18.88 4 20 5.12 20 6.5V14.5C20 15.88 18.88 17 17.5 17H10.2L7.5 18.5Z" stroke="currentColor" stroke-width="1.6" opacity=".92"/>
      <path d="M8 8.8h8M8 11.8h6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".92"/>
    </svg>
  </button>

  <!-- Live Chat Panel (iframe) -->
  <section class="chatbot-panel" id="chatbotPanel" aria-hidden="true" aria-label="Chat AI Live Panel">
    <div class="chatbot-header">
      <div class="chatbot-title">
        <span>Chat AI (Live)</span>
        <span class="chatbot-badge" id="chatbotMode">Live</span>
      </div>
      <div class="chatbot-actions">
        <a class="chatbot-iconbtn"
           id="chatbotOpenNew"
           href="https://bles-k9q0mqpju-blesustetus-projects.vercel.app"
           target="_blank"
           rel="noopener"
           aria-label="Open in new tab"
           title="Open in new tab">â†—</a>

        <button class="chatbot-iconbtn" id="chatbotClose" aria-label="Close chatbot" title="Close">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 6l12 12M18 6 6 18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="chatbot-loading" id="chatbotLoading">Loading chatâ€¦</div>

    <div style="flex:1; overflow:hidden;">
      <iframe
        id="chatbotIframe"
        class="chatbot-iframe"
        src="https://bles-k9q0mqpju-blesustetus-projects.vercel.app"
        loading="lazy"
        referrerpolicy="no-referrer"
        allow="clipboard-read; clipboard-write; fullscreen"
        title="Chat AI Live">
      </iframe>
    </div>
  </section>

  <script>
    // === Live Chat Panel Controller (iframe) ===
    (() => {
      const fab = document.getElementById("chatbotFab");
      const panel = document.getElementById("chatbotPanel");
      const closeBtn = document.getElementById("chatbotClose");
      const iframe = document.getElementById("chatbotIframe");
      const loading = document.getElementById("chatbotLoading");
      const modeBadge = document.getElementById("chatbotMode");

      if (!fab || !panel || !closeBtn || !iframe || !loading || !modeBadge) return;

      const LIVE_URL = "https://bles-k9q0mqpju-blesustetus-projects.vercel.app";

      function openPanel(){
        panel.setAttribute("aria-hidden", "false");
        panel.dataset.loading = "true";
        modeBadge.textContent = "Live";
        // Ensure correct src
        if (!iframe.src || iframe.src === "about:blank") iframe.src = LIVE_URL;
      }

      function closePanel(){
        panel.setAttribute("aria-hidden", "true");
      }

      iframe.addEventListener("load", () => {
        panel.dataset.loading = "false";
      });

      fab.addEventListener("click", () => {
        const isHidden = panel.getAttribute("aria-hidden") !== "false";
        isHidden ? openPanel() : closePanel();
      });

      closeBtn.addEventListener("click", closePanel);

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && panel.getAttribute("aria-hidden") === "false") closePanel();
      });
    })();
  </script>

</body>
</html>
